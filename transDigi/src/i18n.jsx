import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

const I18nContext = createContext({
  lang: 'fr',
  t: (k) => k,
  setLang: () => {},
});

const TRANSLATIONS = {
  fr: {
    'nav.home': 'Accueil',
    'nav.about': 'A propos',
    'nav.contact': 'Contact',
    'nav.login': 'Se connecter',
    'aria.toggle.sidebar': 'Basculer la barre latérale',
    'aria.toggle.theme': 'Basculer thème',
    'aria.back': 'Retour',
    'about.hero.title': "Connecter le Sénégal au Monde \n L'Histoire de TransDigiSN.",
    'about.hero.subtitle': "Découvrez notre parcours, notre mission et l'équipe qui rend tout cela possible.",
    'about.hero.cta': 'Obtenir un Devis',
    'about.story.title': 'Notre Histoire',
    'about.story.text': "Née de la volonté de connecter efficacement les entreprises sénégalaises au monde, TransDigiSN simplifie la logistique grâce au numérique. Notre histoire est celle d'une équipe engagée qui place la transparence, la fiabilité et la performance au cœur de chaque expédition.",
    'about.mission.title': 'Notre Mission',
    'about.mission.text': 'Simplifier la logistique pour les entreprises au Sénégal grâce à une plateforme numérique transparente et efficace.',
    'about.vision.title': 'Notre Vision',
    'about.vision.text': "Être le principal transitaire digital en Afrique de l’Ouest, reconnu pour notre fiabilité et notre innovation.",
    'about.values.title': 'Nos Valeurs',
    'about.values.text': "Nous nous engageons à la transparence, la satisfaction du client et à l’amélioration continue.",
    'about.stats.title': 'Nos Réalisations Clés',
    'about.stats.shipments': 'Expéditions Gérées',
    'about.stats.countries': 'Pays Desservis',
    'about.stats.satisfaction': 'Satisfaction Client',
    'about.team.title': 'Notre équipe est à votre écoute !',
    'about.team.role.ceo': 'PDG et fondateur',
    'about.team.role.cto': 'Directeur de la Technologie',
    'about.team.role.ops': 'Responsable des Opérations',
    'about.team.role.leadlog': 'Coordinateur Logistique Principal',
    'about.cta.title': 'Prêt à simplifier votre logistique ?',
    'about.cta.subtitle': "Laissez‑nous gérer les complexités de l’expédition pour que vous puissiez vous concentrer sur la croissance de votre entreprise. Obtenez un devis gratuit et sans engagement dès aujourd’hui.",
    'about.cta.button': "Obtenir un Devis Aujourd'hui",
    'contact.title': 'Contactez‑nous',
    'contact.subtitle': 'Nous sommes là pour vous aider',
    'contact.form.title': 'Envoyez‑nous un message',
    'contact.form.fullName': 'Nom complet',
    'contact.form.email': 'Adresse e‑mail',
    'contact.form.phone': 'Téléphone',
    'contact.form.message': 'Votre message',
    'contact.form.placeholder.fullName': 'Entrez votre nom complet',
    'contact.form.placeholder.email': 'Entrez votre adresse e‑mail',
    'contact.form.placeholder.phone': 'Ex: +221 775958340 ou 770608438',
    'contact.form.placeholder.message': 'Écrivez votre message ici',
    'contact.form.send': 'Envoyer ▷',
    'contact.info.title': 'Nos coordonnées',
    'contact.info.phone': 'Téléphone',
    'contact.info.email': 'E‑mail',
    'contact.info.address': 'Adresse',
    'contact.info.address.value': "123 Rue de l'Innovation, Dakar, Sénégal",
    'contact.hours.title': 'Nos horaires',
    'contact.hours.monfri': 'Lundi ‑ Vendredi',
    'contact.hours.sat': 'Samedi',
    'contact.hours.sun': 'Dimanche',
    'contact.hours.closed': 'Fermé',
    'contact.follow.title': 'Suivez‑nous',
    'contact.map.title': 'Où nous trouver',
    'contact.map.iframe.title': 'Carte - Dakar, Sénégal',
    'contact.toast.sent': 'Message envoyé',
    'contact.validation.fullName.required': 'Le nom est requis',
    'contact.validation.fullName.format': "Le nom ne doit contenir que des lettres, espaces, apostrophes ou tirets",
    'contact.validation.email.required': "L'e‑mail est requis",
    'contact.validation.email.format': 'Adresse e‑mail invalide',
    'contact.validation.phone.required': 'Le numéro de téléphone est requis',
    'contact.validation.phone.intl': 'Numéro avec indicatif invalide (ex: +221XXXXXXXXX)',
    'contact.validation.phone.local': 'Numéro sans indicatif: exactement 9 chiffres',
    'contact.validation.subject.required': 'Le sujet est requis',
    'contact.validation.message.required': 'Le message est requis',
    'home.hero.title.line1': 'Suivez vos marchandises',
    'home.hero.title.line2': 'en temps réel',
    'home.hero.lead': 'Connectez-vous avec des transitaires fiables en un clic',
    'home.hero.btn.client': 'Je suis un client',
    'home.hero.btn.forwarder': 'Je suis un transitaire',
    'home.services.title': 'Types de services disponibles',
    'home.services.subtitle': 'Des solutions complètes pour tous vos besoins en transport et logistique',
    'home.services.maritime': 'Transport Maritime',
    'home.services.maritime.desc': 'Expéditions internationales par voie maritime avec suivi en temps réel',
    'home.services.air': 'Transport Aérien',
    'home.services.air.desc': 'Solutions rapides et sécurisées pour vos envois urgents',
    'home.services.road': 'Transport Routier',
    'home.services.road.desc': 'Livraisons terrestres fiables à travers le pays',
    'home.how.title': 'Comment ça marche',
    'home.how.clients.title': 'Pour les clients',
    'home.how.clients.subtitle': 'Commencez et gérez vos expéditions en toute simplicité.',
    'home.how.clients.step1.title': 'Créez votre compte',
    'home.how.clients.step1.text': 'Inscrivez-vous en quelques minutes pour commencer.',
    'home.how.clients.step2.title': 'Publiez votre demande',
    'home.how.clients.step2.text': "Décrivez vos besoins d'expédition pour recevoir des devis.",
    'home.how.clients.step3.title': 'Recevez des devis',
    'home.how.clients.step3.text': 'Comparez des propositions de transitaires qualifiés.',
    'home.how.clients.step4.title': 'Choisissez votre transitaire',
    'home.how.clients.step4.text': "Sélectionnez l'offre qui vous convient et lancez l'expédition.",
    'home.how.forwarders.title': 'Pour les transitaires',
    'home.how.forwarders.subtitle': 'Développez votre activité avec des opportunités qualifiées.',
    'home.how.forwarders.step1.title': 'Créez votre profil',
    'home.how.forwarders.step1.text': 'Mettez en avant votre expertise et vos services.',
    'home.how.forwarders.step2.title': 'Trouvez des opportunités',
    'home.how.forwarders.step2.text': 'Accédez à de nouvelles demandes de transport chaque jour.',
    'home.how.forwarders.step3.title': 'Envoyez vos devis',
    'home.how.forwarders.step3.text': 'Répondez aux demandes avec des offres compétitives.',
    'home.how.forwarders.step4.title': 'Gagnez de nouveaux clients',
    'home.how.forwarders.step4.text': 'Développez votre activité sur de nouveaux marchés.',
    'home.testimonials.title': "Ce qu'ils en disent",
    'home.testimonials.quote1.text': "\"TransDigiSN a transformé notre gestion logistique. Trouver un transitaire fiable n'a jamais été aussi simple et rapide. Une plateforme indispensable !\"",
    'home.testimonials.quote1.author': 'Amy Ndiaye',
    'home.testimonials.quote1.role': 'Responsable Logistique, TechCorp',
    'home.testimonials.quote2.text': "\"En tant que transitaire, la plateforme m'a permis d'accéder à un flux constant de nouvelles opportunités. Mon chiffre d'affaires a augmenté de 20% en 6 mois.\"",
    'home.testimonials.quote2.author': 'Mouhamadou Fadal Diagne',
    'home.testimonials.quote2.role': 'Directeur, GéoTransSénégal',
    'home.cta.title': 'Prêt à optimiser vos expéditions ?',
    'home.cta.subtitle': "Rejoignez notre réseau de clients et de transitaires de confiance dès aujourd'hui. L'inscription est simple et rapide.",
    'home.cta.btn.client': 'Commencer en tant que client',
    'home.cta.btn.forwarder': 'Rejoindre comme transitaire',
    'login.header.title': 'Accédez à votre espace',
    'login.header.subtitle': 'Connectez-vous à votre compte TransDigiSN',
    'login.fields.identifier.label': 'Email ou Numéro de téléphone',
    'login.fields.identifier.placeholder': 'Entrez votre email ou numéro de téléphone',
    'login.fields.password.label': 'Mot de passe',
    'login.fields.password.placeholder': 'Entrez votre mot de passe',
    'login.password.hint': 'Au moins 8 caractères, dont 1 lettre et 1 chiffre',
    'login.password.aria.show': 'Afficher le mot de passe',
    'login.password.aria.hide': 'Masquer le mot de passe',
    'login.remember': 'Se souvenir de moi',
    'login.forgot': 'Mot de passe oublié ?',
    'login.submit': 'Se connecter',
    'login.retry_in': 'Réessayer dans',
    'login.signup.prompt': 'Pas encore de compte ?',
    'login.signup.link': "S'inscrire",
    'login.errors.auth_failed': "Échec de l'authentification",
    'login.errors.too_many_attempts': 'Trop de tentatives. Veuillez réessayer dans quelques secondes.',
    'login.errors.blocked': 'Votre compte est bloqué. Contactez le support.',
    'login.errors.archived': 'Votre compte est archivé. Contactez le support.',
    'login.errors.pending_approval': "Votre compte est en attente d'approbation par un administrateur.",
    'login.errors.invalid_creds': 'Identifiants invalides. Vérifiez vos informations.',
    'login.errors.email_unverified': 'Email non vérifié. Veuillez vérifier votre boîte mail.',
    'login.resend.btn': "Renvoyer l'email de vérification",
    'login.resend.sending': 'Renvoi...',
    'login.resend.success': 'Email de vérification renvoyé (si un compte existe).',
    'login.resend.error': 'Échec de renvoi.',
    'signup.title': 'Créer un compte',
    'signup.subtitle': 'Choisissez votre profil pour continuer',
    'signup.client.title': 'Client',
    'signup.client.desc': 'Demandez des devis et suivez vos expéditions.',
    'signup.client.cta': 'Continuer en tant que client',
    'signup.forwarder.title': 'Transitaire',
    'signup.forwarder.desc': 'Rejoignez notre réseau et recevez des demandes.',
    'signup.forwarder.cta': 'Continuer en tant que transitaire',
    'forgot.title': 'Mot de passe oublié',
    'forgot.subtitle': 'Entrez votre e‑mail pour recevoir un lien de réinitialisation.',
    'forgot.email.label': 'Adresse e‑mail',
    'forgot.email.placeholder': 'vous@exemple.com',
    'forgot.type.label': 'Type de compte',
    'forgot.type.user': 'Client',
    'forgot.type.forwarder': 'Transitaire',
    'forgot.submit.sending': 'Envoi...',
    'forgot.submit': 'Envoyer le lien',
    'forgot.hint': 'Vous recevrez un e‑mail si un compte correspond à cette adresse.',
    'forgot.msg.success': 'Email de réinitialisation envoyé (si le compte existe).',
    'forgot.msg.error': 'Erreur lors de la demande.',
    'forgot.msg.invalid_email': 'Adresse e‑mail invalide',
    'reset.title': 'Réinitialiser le mot de passe',
    'reset.new.label': 'Nouveau mot de passe',
    'reset.confirm.label': 'Confirmer le mot de passe',
    'reset.new.hint': 'Au moins 8 caractères, 1 lettre et 1 chiffre.',
    'reset.submit.sending': 'Réinitialisation...',
    'reset.submit': 'Réinitialiser',
    'reset.redirect.hint': 'Vous serez redirigé vers la page de connexion.',
    'reset.validate.min': 'Au moins 8 caractères',
    'reset.validate.complexity': 'Incluez 1 lettre et 1 chiffre',
    'reset.validate.mismatch': 'Les mots de passe ne correspondent pas',
    'reset.msg.invalid_link': 'Lien invalide.',
    'reset.msg.success': 'Mot de passe réinitialisé.',
    'reset.msg.error': 'Erreur lors de la réinitialisation. Si le lien a expiré, demandez un nouveau lien.',
    'verify.title': "Vérification d'email",
    'verify.pending': 'Vérification en cours...',
    'verify.token_missing': 'Token manquant.',
    'verify.success': 'Email vérifié avec succès.',
    'verify.error': 'Échec de la vérification.',
    'verify.error_generic': 'Erreur pendant la vérification.',
    'verify.go_login': 'Aller à la connexion',
    'oauth.processing': 'Traitement de la connexion...',
    'oauth.token_missing': 'Token manquant. Veuillez réessayer.',
    'oauth.success': 'Connexion réussie, redirection...',
    'oauth.error': 'Erreur lors du traitement.',

    // Dashboard client
    'client.sidebar.dashboard': 'Tableau de bord',
    'client.sidebar.search_forwarder': 'Trouver un transitaire',
    'client.sidebar.new_quote': 'Nouveau devis',
    'client.sidebar.history': 'Historique',
    'client.sidebar.shipments': 'Suivi des envois',
    'client.sidebar.profile': 'Mon profil',

    'client.header.notifications': 'Notifications',
    'client.header.mark_all_read': 'Tout marquer lu',
    'client.header.no_notifications': 'Aucune notification',
    'client.header.loading': 'Chargement...',
    'client.header.open_profile_menu': 'Ouvrir menu profil',
    'client.header.menu.edit_profile': 'Modifier profil',
    'client.header.menu.edit_password': 'Modifier mot de passe',
    'client.header.menu.logout': 'Se déconnecter',

    'client.welcome.title_prefix': 'Bonjour',
    'client.welcome.subtitle': 'Voici un aperçu de votre activité récente.',

    'client.quotes.title': 'Mes devis',
    'client.quotes.filter.all': 'Tous',
    'client.quotes.filter.accepted': 'Acceptés',
    'client.quotes.filter.pending': 'En attente',
    'client.quotes.status.accepted': 'Accepté',
    'client.quotes.status.refused': 'Refusé',
    'client.quotes.status.canceled': 'Annulé',
    'client.quotes.status.waiting': 'En attente',
    'client.quotes.route_missing': 'Itinéraire non renseigné',
    'client.quotes.detail': 'Détail',
    'client.quotes.edit': 'Modifier',
    'client.quotes.cancel': 'Annuler',
    'client.quotes.cancel.confirm': 'Confirmer',
    'client.quotes.pagination.label': 'Page',
    'client.quotes.pagination.prev': 'Précédent',
    'client.quotes.pagination.next': 'Suivant',

    'client.activity.title': 'Activité récente',
    'client.activity.view_all': 'Voir tout',
    'client.activity.none': 'Aucune activité récente.',

    // Transitaire dashboard
    'forwarder.sidebar.dashboard': 'Tableau de bord',
    'forwarder.sidebar.profile': 'Mon profil',

    'forwarder.header.notifications': 'Notifications',
    'forwarder.header.mark_all_read': 'Tout marquer lu',
    'forwarder.header.no_notifications': 'Aucune notification',
    'forwarder.header.loading': 'Chargement...',
    'forwarder.header.open_profile_menu': 'Ouvrir menu profil',
    'forwarder.header.menu.edit_profile': 'Modifier profil',
    'forwarder.header.menu.edit_password': 'Modifier mot de passe',
    'forwarder.header.menu.logout': 'Se déconnecter',

    'forwarder.page.title': 'Tableau de Bord des Devis',
    'forwarder.page.refresh': 'Rafraîchir',
    'forwarder.stats.title': "Vue d'ensemble de l'activité",

    'forwarder.tabs.pending': 'En attente',
    'forwarder.tabs.in_progress': 'En cours',
    'forwarder.tabs.processed': 'Traités',

    'forwarder.search.placeholder': 'Filtrer par ID, client...',
    'forwarder.table.header.id': 'ID DEVIS',
    'forwarder.table.header.client': 'CLIENT',
    'forwarder.table.header.date': 'DATE',
    'forwarder.table.header.route': 'ORIGINE/DESTINATION',
    'forwarder.table.header.status': 'STATUT',
    'forwarder.table.header.actions': 'ACTIONS',
    'forwarder.table.loading': 'Chargement…',
    'forwarder.table.error': 'Erreur de chargement',
    'forwarder.table.empty': 'Aucun devis trouvé',
    'forwarder.table.pagination.label': 'Page',
    'forwarder.table.pagination.prev': 'Précédent',
    'forwarder.table.pagination.next': 'Suivant',

    'forwarder.modal.respond.title': 'Répondre au devis',
    'forwarder.modal.respond.amount.label': 'Montant de la contre‑offre',
    'forwarder.modal.respond.amount.placeholder': 'Ex: 150000',
    'forwarder.modal.respond.message.label': 'Message',
    'forwarder.modal.respond.message.placeholder': "Détails de l'offre, délais, conditions...",
    'forwarder.modal.respond.files.label': 'Pièces jointes (optionnel)',
    'forwarder.modal.respond.files.help': 'PDF, images… Plusieurs fichiers possibles.',
    'forwarder.modal.respond.cancel': 'Annuler',
    'forwarder.modal.respond.submit.loading': 'Envoi…',
    'forwarder.modal.respond.submit': 'Envoyer la réponse',

    'forwarder.modal.detail.title': 'Détails du devis',
    'forwarder.modal.detail.id': 'ID',
    'forwarder.modal.detail.client': 'Client',
    'forwarder.modal.detail.route': 'Itinéraire',
    'forwarder.modal.detail.date': 'Date',
    'forwarder.modal.detail.status': 'Statut',
    'forwarder.modal.detail.close': 'Fermer',
    'forwarder.modal.detail.respond': 'Répondre',

    // Admin dashboard
    'admin.sidebar.dashboard': 'Tableau de bord',
    'admin.sidebar.validation': 'Validation des comptes',
    'admin.sidebar.clients': 'Clients',
    'admin.sidebar.forwarders': 'Transitaires',

    'admin.header.notifications': 'Notifications',
    'admin.header.mark_all_read': 'Tout marquer lu',
    'admin.header.no_notifications': 'Aucune notification',
    'admin.header.loading': 'Chargement...',
    'admin.header.open_profile_menu': 'Ouvrir menu profil',
    'admin.header.menu.edit_profile': 'Modifier profil',
    'admin.header.menu.edit_password': 'Modifier mot de passe',
    'admin.header.menu.logout': 'Se déconnecter',

    'admin.stats.pending_accounts': 'Comptes en attente',
    'admin.stats.active_users': 'Utilisateurs actifs',
    'admin.stats.verified_forwarders': 'Transitaires vérifiés',
    'admin.stats.blocked_accounts': 'Comptes bloqués',

    'admin.devis.stats.title': 'Statistiques des devis',
    'admin.devis.stats.loading': 'Chargement des statistiques...',
    'admin.devis.stats.error': 'Erreur de chargement des statistiques',
    'admin.devis.distribution.title': 'Répartition par statut',
    'admin.devis.last.title': 'Derniers devis',
    'admin.devis.last.table.forwarder': 'Transitaire',
    'admin.devis.last.table.client': 'Client',
    'admin.devis.last.table.status': 'Statut',
    'admin.devis.last.table.date': 'Date',
    'admin.devis.last.table.none': 'Aucun devis récent',
    'admin.devis.status.accepted': 'accepté',
    'admin.devis.status.canceled': 'annulé',
    'admin.devis.status.pending': 'en attente',

    'admin.activity.title': 'Activité récente',
    'admin.activity.none': 'Aucune activité récente.',

    'admin.notification.detail.title': 'Détails de la notification',
    'admin.notification.detail.close': 'Fermer',
    'admin.notification.detail.quote.title': 'Détail du devis',
  },
  en: {
    'nav.home': 'Home',
    'nav.about': 'About',
    'nav.contact': 'Contact',
    'nav.login': 'Sign in',
    'aria.toggle.sidebar': 'Toggle sidebar',
    'aria.toggle.theme': 'Toggle theme',
    'aria.back': 'Back',
    'about.hero.title': 'Connecting Senegal to the World\nThe Story of TransDigiSN.',
    'about.hero.subtitle': 'Discover our journey, mission, and the team that makes it all possible.',
    'about.hero.cta': 'Get a Quote',
    'about.story.title': 'Our Story',
    'about.story.text': 'Born from the desire to effectively connect Senegalese businesses to the world, TransDigiSN simplifies logistics through digital solutions. Our story is that of a dedicated team placing transparency, reliability, and performance at the heart of every shipment.',
    'about.mission.title': 'Our Mission',
    'about.mission.text': 'Simplify logistics for businesses in Senegal with a transparent and efficient digital platform.',
    'about.vision.title': 'Our Vision',
    'about.vision.text': 'Be the leading digital freight forwarder in West Africa, recognized for our reliability and innovation.',
    'about.values.title': 'Our Values',
    'about.values.text': 'We are committed to transparency, customer satisfaction, and continuous improvement.',
    'about.stats.title': 'Key Achievements',
    'about.stats.shipments': 'Shipments Managed',
    'about.stats.countries': 'Countries Served',
    'about.stats.satisfaction': 'Customer Satisfaction',
    'about.team.title': 'Our team is here for you!',
    'about.team.role.ceo': 'CEO and Founder',
    'about.team.role.cto': 'Chief Technology Officer',
    'about.team.role.ops': 'Head of Operations',
    'about.team.role.leadlog': 'Lead Logistics Coordinator',
    'about.cta.title': 'Ready to simplify your logistics?',
    'about.cta.subtitle': 'Let us handle shipping complexity so you can focus on growing your business. Get a free, no‑obligation quote today.',
    'about.cta.button': 'Get a Quote Today',
    'contact.title': 'Contact us',
    'contact.subtitle': 'We are here to help you',
    'contact.form.title': 'Send us a message',
    'contact.form.fullName': 'Full name',
    'contact.form.email': 'Email address',
    'contact.form.phone': 'Phone',
    'contact.form.message': 'Your message',
    'contact.form.placeholder.fullName': 'Enter your full name',
    'contact.form.placeholder.email': 'Enter your email address',
    'contact.form.placeholder.phone': 'E.g.: +221 775958340 or 770608438',
    'contact.form.placeholder.message': 'Write your message here',
    'contact.form.send': 'Send ▷',
    'contact.info.title': 'Our contact details',
    'contact.info.phone': 'Phone',
    'contact.info.email': 'Email',
    'contact.info.address': 'Address',
    'contact.info.address.value': '123 Innovation Street, Dakar, Senegal',
    'contact.hours.title': 'Opening hours',
    'contact.hours.monfri': 'Monday ‑ Friday',
    'contact.hours.sat': 'Saturday',
    'contact.hours.sun': 'Sunday',
    'contact.hours.closed': 'Closed',
    'contact.follow.title': 'Follow us',
    'contact.map.title': 'Where to find us',
    'contact.map.iframe.title': 'Map - Dakar, Senegal',
    'contact.toast.sent': 'Message sent',
    'contact.validation.fullName.required': 'Name is required',
    'contact.validation.fullName.format': "Name should only contain letters, spaces, apostrophes or hyphens",
    'contact.validation.email.required': 'Email is required',
    'contact.validation.email.format': 'Invalid email address',
    'contact.validation.phone.required': 'Phone number is required',
    'contact.validation.phone.intl': 'Invalid international number (e.g.: +221XXXXXXXXX)',
    'contact.validation.phone.local': 'Local number: exactly 9 digits',
    'contact.validation.subject.required': 'Subject is required',
    'contact.validation.message.required': 'Message is required',
    'home.hero.title.line1': 'Track your shipments',
    'home.hero.title.line2': 'in real time',
    'home.hero.lead': 'Connect with trusted freight forwarders in one click',
    'home.hero.btn.client': 'I am a client',
    'home.hero.btn.forwarder': 'I am a forwarder',
    'home.services.title': 'Available service types',
    'home.services.subtitle': 'Comprehensive solutions for all your transport and logistics needs',
    'home.services.maritime': 'Maritime Transport',
    'home.services.maritime.desc': 'International sea freight with real-time tracking',
    'home.services.air': 'Air Transport',
    'home.services.air.desc': 'Fast and secure solutions for urgent shipments',
    'home.services.road': 'Road Transport',
    'home.services.road.desc': 'Reliable ground deliveries across the country',
    'home.how.title': 'How it works',
    'home.how.clients.title': 'For clients',
    'home.how.clients.subtitle': 'Start and manage your shipments with ease.',
    'home.how.clients.step1.title': 'Create your account',
    'home.how.clients.step1.text': 'Sign up in minutes to get started.',
    'home.how.clients.step2.title': 'Post your request',
    'home.how.clients.step2.text': 'Describe your shipping needs to receive quotes.',
    'home.how.clients.step3.title': 'Receive quotes',
    'home.how.clients.step3.text': 'Compare proposals from qualified forwarders.',
    'home.how.clients.step4.title': 'Choose your forwarder',
    'home.how.clients.step4.text': 'Select the best offer and start the shipment.',
    'home.how.forwarders.title': 'For forwarders',
    'home.how.forwarders.subtitle': 'Grow your business with qualified opportunities.',
    'home.how.forwarders.step1.title': 'Create your profile',
    'home.how.forwarders.step1.text': 'Showcase your expertise and services.',
    'home.how.forwarders.step2.title': 'Find opportunities',
    'home.how.forwarders.step2.text': 'Access new transport requests every day.',
    'home.how.forwarders.step3.title': 'Send your quotes',
    'home.how.forwarders.step3.text': 'Respond with competitive offers.',
    'home.how.forwarders.step4.title': 'Win new clients',
    'home.how.forwarders.step4.text': 'Expand into new markets.',
    'home.testimonials.title': 'What they say',
    'home.testimonials.quote1.text': '"TransDigiSN has transformed our logistics management. Finding a reliable forwarder has never been so simple and fast. An essential platform!"',
    'home.testimonials.quote1.author': 'Amy Ndiaye',
    'home.testimonials.quote1.role': 'Logistics Manager, TechCorp',
    'home.testimonials.quote2.text': '"As a forwarder, the platform gave me a steady stream of new opportunities. My revenue grew 20% in 6 months."',
    'home.testimonials.quote2.author': 'Mouhamadou Fadal Diagne',
    'home.testimonials.quote2.role': 'Director, GéoTransSénégal',
    'home.cta.title': 'Ready to optimize your shipments?',
    'home.cta.subtitle': "Join our network of trusted clients and forwarders today. Sign-up is fast and simple.",
    'home.cta.btn.client': 'Start as a client',
    'home.cta.btn.forwarder': 'Join as a forwarder',
    'login.header.title': 'Access your account',
    'login.header.subtitle': 'Sign in to your TransDigiSN account',
    'login.fields.identifier.label': 'Email or Phone number',
    'login.fields.identifier.placeholder': 'Enter your email or phone number',
    'login.fields.password.label': 'Password',
    'login.fields.password.placeholder': 'Enter your password',
    'login.password.hint': 'At least 8 characters, including 1 letter and 1 digit',
    'login.password.aria.show': 'Show password',
    'login.password.aria.hide': 'Hide password',
    'login.remember': 'Remember me',
    'login.forgot': 'Forgot password?',
    'login.submit': 'Sign in',
    'login.retry_in': 'Retry in',
    'login.signup.prompt': "Don't have an account?",
    'login.signup.link': 'Sign up',
    'login.errors.auth_failed': 'Authentication failed',
    'login.errors.too_many_attempts': 'Too many attempts. Please try again in a few seconds.',
    'login.errors.blocked': 'Your account is blocked. Please contact support.',
    'login.errors.archived': 'Your account is archived. Please contact support.',
    'login.errors.pending_approval': 'Your account is pending admin approval.',
    'login.errors.invalid_creds': 'Invalid credentials. Please check your information.',
    'login.errors.email_unverified': 'Email not verified. Please check your mailbox.',
    'login.resend.btn': 'Resend verification email',
    'login.resend.sending': 'Resending...',
    'login.resend.success': 'Verification email resent (if an account exists).',
    'login.resend.error': 'Resend failed.',
    'signup.title': 'Create an account',
    'signup.subtitle': 'Choose your profile to continue',
    'signup.client.title': 'Client',
    'signup.client.desc': 'Request quotes and track your shipments.',
    'signup.client.cta': 'Continue as client',
    'signup.forwarder.title': 'Forwarder',
    'signup.forwarder.desc': 'Join our network and receive requests.',
    'signup.forwarder.cta': 'Continue as forwarder',
    'forgot.title': 'Forgot password',
    'forgot.subtitle': 'Enter your email to receive a reset link.',
    'forgot.email.label': 'Email address',
    'forgot.email.placeholder': 'you@example.com',
    'forgot.type.label': 'Account type',
    'forgot.type.user': 'Client',
    'forgot.type.forwarder': 'Forwarder',
    'forgot.submit.sending': 'Sending...',
    'forgot.submit': 'Send link',
    'forgot.hint': 'You will receive an email if an account matches this address.',
    'forgot.msg.success': 'Reset email sent (if the account exists).',
    'forgot.msg.error': 'Error while processing request.',
    'forgot.msg.invalid_email': 'Invalid email address',
    'reset.title': 'Reset password',
    'reset.new.label': 'New password',
    'reset.confirm.label': 'Confirm password',
    'reset.new.hint': 'At least 8 characters, 1 letter and 1 digit.',
    'reset.submit.sending': 'Resetting...',
    'reset.submit': 'Reset',
    'reset.redirect.hint': 'You will be redirected to the sign in page.',
    'reset.validate.min': 'At least 8 characters',
    'reset.validate.complexity': 'Include 1 letter and 1 digit',
    'reset.validate.mismatch': 'Passwords do not match',
    'reset.msg.invalid_link': 'Invalid link.',
    'reset.msg.success': 'Password reset successfully.',
    'reset.msg.error': 'Error during reset. If the link expired, request a new one.',
    'verify.title': 'Email verification',
    'verify.pending': 'Verification in progress...',
    'verify.token_missing': 'Missing token.',
    'verify.success': 'Email verified successfully.',
    'verify.error': 'Verification failed.',
    'verify.error_generic': 'Error during verification.',
    'verify.go_login': 'Go to sign in',
    'oauth.processing': 'Processing sign-in...',
    'oauth.token_missing': 'Missing token. Please try again.',
    'oauth.success': 'Sign-in successful, redirecting...',
    'oauth.error': 'Error while processing.',

    // Client dashboard
    'client.sidebar.dashboard': 'Dashboard',
    'client.sidebar.search_forwarder': 'Find a forwarder',
    'client.sidebar.new_quote': 'New quote',
    'client.sidebar.history': 'History',
    'client.sidebar.shipments': 'Shipment tracking',
    'client.sidebar.profile': 'My profile',

    'client.header.notifications': 'Notifications',
    'client.header.mark_all_read': 'Mark all as read',
    'client.header.no_notifications': 'No notifications',
    'client.header.loading': 'Loading...',
    'client.header.open_profile_menu': 'Open profile menu',
    'client.header.menu.edit_profile': 'Edit profile',
    'client.header.menu.edit_password': 'Change password',
    'client.header.menu.logout': 'Sign out',

    'client.welcome.title_prefix': 'Hello',
    'client.welcome.subtitle': 'Here is an overview of your recent activity.',

    'client.quotes.title': 'My quotes',
    'client.quotes.filter.all': 'All',
    'client.quotes.filter.accepted': 'Accepted',
    'client.quotes.filter.pending': 'Pending',
    'client.quotes.status.accepted': 'Accepted',
    'client.quotes.status.refused': 'Refused',
    'client.quotes.status.canceled': 'Canceled',
    'client.quotes.status.waiting': 'Pending',
    'client.quotes.route_missing': 'Route not specified',
    'client.quotes.detail': 'Details',
    'client.quotes.edit': 'Edit',
    'client.quotes.cancel': 'Cancel',
    'client.quotes.cancel.confirm': 'Confirm',
    'client.quotes.pagination.label': 'Page',
    'client.quotes.pagination.prev': 'Previous',
    'client.quotes.pagination.next': 'Next',

    'client.activity.title': 'Recent activity',
    'client.activity.view_all': 'View all',
    'client.activity.none': 'No recent activity.',

    // Forwarder dashboard
    'forwarder.sidebar.dashboard': 'Dashboard',
    'forwarder.sidebar.profile': 'My profile',

    'forwarder.header.notifications': 'Notifications',
    'forwarder.header.mark_all_read': 'Mark all as read',
    'forwarder.header.no_notifications': 'No notifications',
    'forwarder.header.loading': 'Loading...',
    'forwarder.header.open_profile_menu': 'Open profile menu',
    'forwarder.header.menu.edit_profile': 'Edit profile',
    'forwarder.header.menu.edit_password': 'Change password',
    'forwarder.header.menu.logout': 'Sign out',

    'forwarder.page.title': 'Quote Dashboard',
    'forwarder.page.refresh': 'Refresh',
    'forwarder.stats.title': 'Activity overview',

    'forwarder.tabs.pending': 'Pending',
    'forwarder.tabs.in_progress': 'In progress',
    'forwarder.tabs.processed': 'Processed',

    'forwarder.search.placeholder': 'Filter by ID, client...',
    'forwarder.table.header.id': 'QUOTE ID',
    'forwarder.table.header.client': 'CLIENT',
    'forwarder.table.header.date': 'DATE',
    'forwarder.table.header.route': 'ORIGIN/DESTINATION',
    'forwarder.table.header.status': 'STATUS',
    'forwarder.table.header.actions': 'ACTIONS',
    'forwarder.table.loading': 'Loading…',
    'forwarder.table.error': 'Loading error',
    'forwarder.table.empty': 'No quotes found',
    'forwarder.table.pagination.label': 'Page',
    'forwarder.table.pagination.prev': 'Previous',
    'forwarder.table.pagination.next': 'Next',

    'forwarder.modal.respond.title': 'Respond to quote',
    'forwarder.modal.respond.amount.label': 'Counter-offer amount',
    'forwarder.modal.respond.amount.placeholder': 'Ex: 150000',
    'forwarder.modal.respond.message.label': 'Message',
    'forwarder.modal.respond.message.placeholder': 'Offer details, deadlines, conditions...',
    'forwarder.modal.respond.files.label': 'Attachments (optional)',
    'forwarder.modal.respond.files.help': 'PDF, images… Multiple files allowed.',
    'forwarder.modal.respond.cancel': 'Cancel',
    'forwarder.modal.respond.submit.loading': 'Sending…',
    'forwarder.modal.respond.submit': 'Send response',

    'forwarder.modal.detail.title': 'Quote details',
    'forwarder.modal.detail.id': 'ID',
    'forwarder.modal.detail.client': 'Client',
    'forwarder.modal.detail.route': 'Route',
    'forwarder.modal.detail.date': 'Date',
    'forwarder.modal.detail.status': 'Status',
    'forwarder.modal.detail.close': 'Close',
    'forwarder.modal.detail.respond': 'Respond',

    // Admin dashboard
    'admin.sidebar.dashboard': 'Dashboard',
    'admin.sidebar.validation': 'Account validation',
    'admin.sidebar.clients': 'Clients',
    'admin.sidebar.forwarders': 'Forwarders',

    'admin.header.notifications': 'Notifications',
    'admin.header.mark_all_read': 'Mark all as read',
    'admin.header.no_notifications': 'No notifications',
    'admin.header.loading': 'Loading...',
    'admin.header.open_profile_menu': 'Open profile menu',
    'admin.header.menu.edit_profile': 'Edit profile',
    'admin.header.menu.edit_password': 'Change password',
    'admin.header.menu.logout': 'Sign out',

    'admin.stats.pending_accounts': 'Pending accounts',
    'admin.stats.active_users': 'Active users',
    'admin.stats.verified_forwarders': 'Verified forwarders',
    'admin.stats.blocked_accounts': 'Blocked accounts',

    'admin.devis.stats.title': 'Quote statistics',
    'admin.devis.stats.loading': 'Loading statistics...',
    'admin.devis.stats.error': 'Error loading statistics',
    'admin.devis.distribution.title': 'Breakdown by status',
    'admin.devis.last.title': 'Latest quotes',
    'admin.devis.last.table.forwarder': 'Forwarder',
    'admin.devis.last.table.client': 'Client',
    'admin.devis.last.table.status': 'Status',
    'admin.devis.last.table.date': 'Date',
    'admin.devis.last.table.none': 'No recent quotes',
    'admin.devis.status.accepted': 'accepted',
    'admin.devis.status.canceled': 'canceled',
    'admin.devis.status.pending': 'pending',

    'admin.activity.title': 'Recent activity',
    'admin.activity.none': 'No recent activity.',

    'admin.notification.detail.title': 'Notification details',
    'admin.notification.detail.close': 'Close',
    'admin.notification.detail.quote.title': 'Quote details',
  }
};

export function I18nProvider({ children }) {
  const [lang, setLangState] = useState('fr');

  useEffect(() => {
    const saved = localStorage.getItem('lang') || 'fr';
    setLangState(saved);
    try { document.documentElement.lang = saved; } catch {}
  }, []);

  const setLang = (next) => {
    setLangState(next);
    localStorage.setItem('lang', next);
    try { document.documentElement.lang = next; } catch {}
  };

  const t = useMemo(() => {
    return (key) => (TRANSLATIONS[lang] && TRANSLATIONS[lang][key]) || TRANSLATIONS['fr'][key] || key;
  }, [lang]);

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t]);
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  return useContext(I18nContext);
}
